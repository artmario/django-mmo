{% extends 'admin_base.html' %}

{% block title %}Player: {{ player }}{% endblock %}

{% block admin_page_content %}
    
    <p>The intention of this page is it gives you the entire game from {{ player.name }}'s perspective. When {{ player.name }} is logged in, he or she will see something similar to this.</p>
    
    <p><a href="../">players</a></p>
    
    <h1>{{ player.name }}</h1>
    
    <table>
        
        <tr>
            <td valign="top" width="280">
                <a href="">REFRESH</a> |
                @@@ Report a bug |
                @@@ Save &amp; Exit <br />
                @@@ HOMEPAGE
            </td>
            <td valign="top" width="200">
                {{ player.name }} $ {{ player.balance }}<br />
                Level <b>{{ player.level }}</b> - xp: <b>{{ player.xp }}</b><br />
                (next level at {{ player.next_level_at }})
            </td>
            <td valign="top" width="320">
                <b>energy</b> [@@@] {{ player.energy }}/5000<br />
                <b>mood</b> [@@@] {{ player.mood }}/200<br />
                <b>karma</b> [@@@] {{ player.karma }}/200<br />
            </td>
        </tr>
        
        <tr>
            <td colspan="2" valign="top" width="480">
                <h2>Location</h2>
                
                {% if player.location.lot %}
                    <h2>{{ player.location.lot.name }}</h2>
                    <p>{{ player.location.lot.description }}</p>
                    
                    <form method="POST" action="">
                        <p>back to <b>{{ player.location.lot.hub }}</b>
                                <input type="hidden" name="exit_to" value="{{ player.location.lot.hub.id}}" />
                                <input type="submit" value="go" />
                        </p>
                    </form>
                {% else %}
                    <h2>{{ player.location.hub.name }}</h2>
                    <p>{{ player.location.hub.description }}</p>
                    
                    <h3>Roads</h3>
                    
                    {% if player.location.hub.roads %}
                        <ul>
                            {% for road in player.location.hub.roads %}
                                <li>{{ road.direction }} to <b>{{ road.destination }}</b>
                                    <form method="POST" action="">
                                        <input type="hidden" name="travel_to" value="{{ road.destination.id}}" />
                                        <input type="submit" value="go" />
                                    </form>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No roads out of here.</p>
                    {% endif %}
                    
                    <h3>Lots</h3>
                    
                    {% if player.location.hub.lots %}
                        <ul>
                            {% for lot in player.location.hub.lots %}
                                <li>{{ lot.position }}. 
                                    {% ifequal lot.kind "A" %}
                                        <b>{{ lot.name }}</b>
                                        <form method="POST" action="">
                                            <input type="hidden" name="enter" value="{{ lot.id}}" />
                                            <input type="submit" value="go" />
                                        </form>
                                    {% else %}
                                        <b>{{ lot.name }}</b>
                                    {% endifequal %}
                                    {{ lot.description }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No lots here.</p>
                    {% endif %}
                {% endif %}
            </td>
            <td valign="top">
                <table>
                    <tr>
                        <td>
                            <h2>What's Here</h2>
                            
                            {% if player.location.lot %}
                                {% if player.location.lot.what_is_here %}
                                    <ul>
                                        {% for pile in player.location.lot.what_is_here %}
                                            <li>{{ pile.item_type }} [{{ pile.total_quantity }}]<br />
                                                <form method="POST" action="">
                                                    pick up <input type="hidden" name="pickup_pile" value="{{ pile.id }}" />
                                                    {% for q in pile.pickup_list %}
                                                        <input type="submit" name="quantity" value="{{ q }}" />
                                                    {% endfor %}
                                                </form>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>Nothing here.</p>
                                {% endif %}
                                
                            {% else %}
                                
                                {% if player.location.hub.what_is_here %}
                                    <ul>
                                        {% for pile in player.location.hub.what_is_here %}
                                            <li>{{ pile.item_type }} [{{ pile.total_quantity }}]<br />
                                                <form method="POST" action="">
                                                    pick up <input type="hidden" name="pickup_pile" value="{{ pile.id }}" />
                                                    {% for q in pile.pickup_list %}
                                                        <input type="submit" name="quantity" value="{{ q }}" />
                                                    {% endfor %}
                                                </form>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>Nothing here.</p>
                                {% endif %}
                                
                            {% endif %}
                        </td>
                        <td>
                            <h2>Who's Here</h2>
                            
                            {% if player.location.lot %}
                                {% ifequal player.location.lot.who_is_here.0 1 %}
                                    <p>Just you.</p>
                                {% else %}
                                    <ul>
                                        {% for other_player in player.location.lot.who_is_here.1 %}
                                            {% ifequal player other_player %}
                                            {% else %}
                                                <li>{{ other_player}}</li>
                                            {% endifequal %}
                                        {% endfor %}
                                    </ul>
                                {% endifequal %}
                                
                            {% else %}
                                
                                {% ifequal player.location.hub.who_is_here.0 1 %}
                                    <p>Just you.</p>
                                {% else %}
                                    <ul>
                                        {% for other_player in player.location.hub.who_is_here.1 %}
                                            {% ifequal player other_player %}
                                            {% else %}
                                                <li>{{ other_player}}</li>
                                            {% endifequal %}
                                        {% endfor %}
                                    </ul>
                                {% endifequal %}
                                
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h2>Chat</h2>
                            
                            <p>@@@</p>
                            
                            <h2>Activity Log</h2>
                            
                            <p>@@@</p>
                            
                            <h2>Prefs</h2>
                            
                            <p>@@@</p>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            <h2>Inventory</h2>
                            
                            {% if player.inventory %}
                                <ul>
                                    {% for pile in player.inventory %}
                                        <li>{{ pile.item_type }} [{{ pile.quantity }}]<br />
                                            <form method="POST" action="">
                                                drop <input type="hidden" name="drop_pile" value="{{ pile.id }}" />
                                                {% for q in pile.drop_list %}
                                                    <input type="submit" name="quantity" value="{{ q }}" />
                                                {% endfor %}
                                            </form>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p>Nothing.</p>
                            {% endif %}
                            
                            <h2>Notes</h2>
                            
                            <p>@@@</p>
                            
                            <h2>Making</h2>
                            
                            <p>@@@</p>
                            
                            <h2>Contacts</h2>
                            
                            <p>@@@</p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    
{% endblock %}